<hr>
<p>layout: a<br>title: SAS理解<br>date: 2020-08-08 16:32:53<br>tags:</p>
<hr>
<h4 id="一、常见的SCSI命令"><a href="#一、常见的SCSI命令" class="headerlink" title="一、常见的SCSI命令"></a>一、常见的SCSI命令</h4><table>
<thead>
<tr>
<th>命令</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>Test unit ready</td>
<td>查询设备是否已经准备好进行传输</td>
</tr>
<tr>
<td>Inquiry</td>
<td>请求设备基本信息</td>
</tr>
<tr>
<td>Request sense</td>
<td>请求之前命令的错误信息</td>
</tr>
<tr>
<td>Read capacity</td>
<td>请求存储容量信息</td>
</tr>
<tr>
<td>Read</td>
<td>从设备读取数据</td>
</tr>
<tr>
<td>Write</td>
<td>向设备写入数据</td>
</tr>
</tbody></table>
<h4 id="二、内核中SCSI命令字，错误码，状态定义"><a href="#二、内核中SCSI命令字，错误码，状态定义" class="headerlink" title="二、内核中SCSI命令字，错误码，状态定义"></a>二、内核中SCSI命令字，错误码，状态定义</h4><p>文件在：/usr/include/scsi/scsi.h</p>
<pre><code class="cpp"><span class="comment">/*</span>
<span class="comment"> *      SCSI opcodes</span>
<span class="comment"> */</span>

<span class="meta">#<span class="meta-keyword">define</span> TEST_UNIT_READY       0x00</span>
<span class="meta">#<span class="meta-keyword">define</span> REZERO_UNIT           0x01</span>
<span class="meta">#<span class="meta-keyword">define</span> REQUEST_SENSE         0x03</span>
<span class="meta">#<span class="meta-keyword">define</span> FORMAT_UNIT           0x04</span>
<span class="meta">#<span class="meta-keyword">define</span> READ_BLOCK_LIMITS     0x05</span>
<span class="meta">#<span class="meta-keyword">define</span> REASSIGN_BLOCKS       0x07</span>
<span class="meta">#<span class="meta-keyword">define</span> READ_6                0x08</span>
<span class="meta">#<span class="meta-keyword">define</span> WRITE_6               0x0a</span>
<span class="meta">#<span class="meta-keyword">define</span> SEEK_6                0x0b</span>
<span class="meta">#<span class="meta-keyword">define</span> READ_REVERSE          0x0f</span>
<span class="meta">#<span class="meta-keyword">define</span> WRITE_FILEMARKS       0x10</span>
<span class="meta">#<span class="meta-keyword">define</span> SPACE                 0x11</span>
<span class="meta">#<span class="meta-keyword">define</span> INQUIRY               0x12</span>
<span class="meta">#<span class="meta-keyword">define</span> RECOVER_BUFFERED_DATA 0x14</span>
<span class="meta">#<span class="meta-keyword">define</span> MODE_SELECT           0x15</span>
<span class="meta">#<span class="meta-keyword">define</span> RESERVE               0x16</span>
<span class="meta">#<span class="meta-keyword">define</span> RELEASE               0x17</span>
<span class="meta">#<span class="meta-keyword">define</span> COPY                  0x18</span>
<span class="meta">#<span class="meta-keyword">define</span> ERASE                 0x19</span>
<span class="meta">#<span class="meta-keyword">define</span> MODE_SENSE            0x1a</span>
<span class="meta">#<span class="meta-keyword">define</span> START_STOP            0x1b</span>
<span class="meta">#<span class="meta-keyword">define</span> RECEIVE_DIAGNOSTIC    0x1c</span>
<span class="meta">#<span class="meta-keyword">define</span> SEND_DIAGNOSTIC       0x1d</span>
<span class="meta">#<span class="meta-keyword">define</span> ALLOW_MEDIUM_REMOVAL  0x1e</span>

<span class="comment">/*</span>
<span class="comment"> *  Status codes</span>
<span class="comment"> */</span>

<span class="meta">#<span class="meta-keyword">define</span> GOOD                 0x00</span>
<span class="meta">#<span class="meta-keyword">define</span> CHECK_CONDITION      0x01</span>
<span class="meta">#<span class="meta-keyword">define</span> CONDITION_GOOD       0x02</span>
<span class="meta">#<span class="meta-keyword">define</span> BUSY                 0x04</span>
<span class="meta">#<span class="meta-keyword">define</span> INTERMEDIATE_GOOD    0x08</span>
<span class="meta">#<span class="meta-keyword">define</span> INTERMEDIATE_C_GOOD  0x0a</span>
<span class="meta">#<span class="meta-keyword">define</span> RESERVATION_CONFLICT 0x0c</span>
<span class="meta">#<span class="meta-keyword">define</span> COMMAND_TERMINATED   0x11</span>
<span class="meta">#<span class="meta-keyword">define</span> QUEUE_FULL           0x14</span>

<span class="meta">#<span class="meta-keyword">define</span> STATUS_MASK          0x3e</span>

<span class="comment">/*</span>
<span class="comment"> *  SENSE KEYS</span>
<span class="comment"> */</span>

<span class="meta">#<span class="meta-keyword">define</span> NO_SENSE            0x00</span>
<span class="meta">#<span class="meta-keyword">define</span> RECOVERED_ERROR     0x01</span>
<span class="meta">#<span class="meta-keyword">define</span> NOT_READY           0x02</span>
<span class="meta">#<span class="meta-keyword">define</span> MEDIUM_ERROR        0x03</span>
<span class="meta">#<span class="meta-keyword">define</span> HARDWARE_ERROR      0x04</span>
<span class="meta">#<span class="meta-keyword">define</span> ILLEGAL_REQUEST     0x05</span>
<span class="meta">#<span class="meta-keyword">define</span> UNIT_ATTENTION      0x06</span>
<span class="meta">#<span class="meta-keyword">define</span> DATA_PROTECT        0x07</span>
<span class="meta">#<span class="meta-keyword">define</span> BLANK_CHECK         0x08</span>
<span class="meta">#<span class="meta-keyword">define</span> COPY_ABORTED        0x0a</span>
<span class="meta">#<span class="meta-keyword">define</span> ABORTED_COMMAND     0x0b</span>
<span class="meta">#<span class="meta-keyword">define</span> VOLUME_OVERFLOW     0x0d</span>
<span class="meta">#<span class="meta-keyword">define</span> MISCOMPARE          0x0e</span>


<span class="comment">/*</span>
<span class="comment"> *  DEVICE TYPES</span>
<span class="comment"> */</span>

<span class="meta">#<span class="meta-keyword">define</span> TYPE_DISK           0x00</span>
<span class="meta">#<span class="meta-keyword">define</span> TYPE_TAPE           0x01</span>
<span class="meta">#<span class="meta-keyword">define</span> TYPE_PROCESSOR      0x03    <span class="comment">/* HP scanners use this */</span></span>
<span class="meta">#<span class="meta-keyword">define</span> TYPE_WORM           0x04    <span class="comment">/* Treated as ROM by our system */</span></span>
<span class="meta">#<span class="meta-keyword">define</span> TYPE_ROM            0x05</span>
<span class="meta">#<span class="meta-keyword">define</span> TYPE_SCANNER        0x06</span>
<span class="meta">#<span class="meta-keyword">define</span> TYPE_MOD            0x07    <span class="comment">/* Magneto-optical disk -</span></span>
<span class="meta"><span class="comment">                     * - treated as TYPE_DISK */</span></span>
<span class="meta">#<span class="meta-keyword">define</span> TYPE_MEDIUM_CHANGER 0x08</span>
<span class="meta">#<span class="meta-keyword">define</span> TYPE_ENCLOSURE      0x0d    <span class="comment">/* Enclosure Services Device */</span></span>
<span class="meta">#<span class="meta-keyword">define</span> TYPE_NO_LUN         0x7f</span></code></pre>
<h4 id="三、SAS，SCSI分层以及关系简图"><a href="#三、SAS，SCSI分层以及关系简图" class="headerlink" title="三、SAS，SCSI分层以及关系简图"></a>三、SAS，SCSI分层以及关系简图</h4><p><img src="" alt="这里写图片描述"></p>
